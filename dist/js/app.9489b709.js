(function(){"use strict";var e={9697:function(e,t,a){var n=a(5130),r=a(6768),i=a(4232);const o={value:"metric"},s={value:"imperial"},l={class:"favourites ul"},u=["onClick"],c=["onClick"],h={key:0},d={key:1},p=["src"],v={key:2,class:"convert-valutes"},f={for:"another-vaute"},g=["placeholder"];function m(e,t,a,m,k,w){const C=(0,r.g2)("WeatherForeCast");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.Lk)("h1",null,[(0,r.eW)((0,i.v_)(e.$t("weatherIn"))+" ",1),(0,r.Lk)("select",{name:"City",id:"City",onChange:t[0]||(t[0]=e=>w.changeCoords(e))},t[8]||(t[8]=[(0,r.Fv)('<option value="N-Tagil">Нижнем Тагиле</option><option value="Tokyo">Токио</option><option value="Pekin">Пекине</option><option value="London">Лондоне</option><option value="Washington">Вашингтоне</option>',5)]),32),(0,r.Lk)("button",{class:"favourite button",onClick:t[1]||(t[1]=(...e)=>w.addFav&&w.addFav(...e))}," ❤️ "),(0,r.Lk)("select",{name:"Grades",id:"Grades",onChange:t[2]||(t[2]=e=>w.changeGrades(e))},[(0,r.Lk)("option",o,(0,i.v_)(e.$t("tempUM.celsius")),1),(0,r.Lk)("option",s,(0,i.v_)(e.$t("tempUM.fahrenheit")),1)],32),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[3]||(t[3]=t=>e.$i18n.locale=t)},t[9]||(t[9]=[(0,r.Lk)("option",{value:"ru"},"Ru",-1),(0,r.Lk)("option",{value:"en"},"En",-1)]),512),[[n.u1,e.$i18n.locale]])]),(0,r.Lk)("ul",l,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(k.favourites,((e,t)=>((0,r.uX)(),(0,r.CE)("li",{key:t,onClick:e=>w.getCity(t)},[(0,r.eW)((0,i.v_)(t)+" ",1),(0,r.Lk)("button",{class:"remove__city button",onClick:e=>w.removeFav(t)},"X",8,c)],8,u)))),128))]),k.weather?((0,r.uX)(),(0,r.CE)("div",d,[(0,r.Lk)("img",{src:`https://openweathermap.org/img/wn/${k.weather.weather[0].icon}@2x.png`,alt:""},null,8,p),(0,r.Lk)("h2",null,(0,i.v_)(k.weather.weather[0].description),1),(0,r.Lk)("h3",null,(0,i.v_)(e.$t("time"))+": "+(0,i.v_)(k.time),1),(0,r.Lk)("h3",null,(0,i.v_)(e.$t("now"))+" "+(0,i.v_)(k.weather.main.temp)+"°, "+(0,i.v_)(e.$t("feelsLike"))+" "+(0,i.v_)(k.weather.main.feels_like)+"°",1),(0,r.Lk)("h3",null,(0,i.v_)(e.$t("pressure"))+": "+(0,i.v_)(k.weather.main.pressure)+" "+(0,i.v_)(e.$t("pressureUM")),1),(0,r.Lk)("h3",null,(0,i.v_)(e.$t("humidity"))+": "+(0,i.v_)(k.weather.main.humidity)+"%",1),(0,r.Lk)("h3",null,(0,i.v_)(e.$t("wind"))+": "+(0,i.v_)(k.weather.wind.speed)+" "+(0,i.v_)(e.$t("windSpeed"))+", "+(0,i.v_)(e.$t("windDirection"))+": "+(0,i.v_)(k.weather.wind.deg)+"°",1)])):((0,r.uX)(),(0,r.CE)("h3",h,(0,i.v_)(e.$t("loading"))+"...",1)),"RUS"!==k.currValute?((0,r.uX)(),(0,r.CE)("div",v,[t[10]||(t[10]=(0,r.Lk)("label",{for:"RUS"},"Рубли: ",-1)),(0,r.bo)((0,r.Lk)("input",{type:"number",id:"rub",placeholder:"RUS","onUpdate:modelValue":t[4]||(t[4]=e=>k.russianValuteVal=e),onInput:t[5]||(t[5]=(...e)=>w.convertRubs&&w.convertRubs(...e))},null,544),[[n.Jo,k.russianValuteVal]]),t[11]||(t[11]=(0,r.Lk)("br",null,null,-1)),(0,r.Lk)("label",f,(0,i.v_)(k.currValute)+": ",1),(0,r.bo)((0,r.Lk)("input",{type:"number",id:"another-valute",placeholder:k.currValute,"onUpdate:modelValue":t[6]||(t[6]=e=>k.foreignValuteVal=e),onInput:t[7]||(t[7]=(...e)=>w.convertForeign&&w.convertForeign(...e))},null,40,g),[[n.Jo,k.foreignValuteVal]])])):(0,r.Q3)("",!0),(0,r.bF)(C,{forecast:k.weatherForeCast},null,8,["forecast"])],64)}const k={class:"forecast"};function w(e,t,a,n,o,s){const l=(0,r.g2)("CardForecast");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.Lk)("button",{class:"prevDay",onClick:t[0]||(t[0]=(...e)=>s.prevPage&&s.prevPage(...e))},(0,i.v_)("<<")),(0,r.Lk)("button",{class:"nextDay",onClick:t[1]||(t[1]=(...e)=>s.nextPage&&s.nextPage(...e))},(0,i.v_)(">>")),(0,r.Lk)("div",k,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.forecast.slice(o.sliceStart,o.sliceEnd),((e,t)=>((0,r.uX)(),(0,r.Wv)(l,{key:t,forecast:e},null,8,["forecast"])))),128))])],64)}const C={class:"forecast-elem"},y=["src"];function b(e,t,a,n,o,s){return(0,r.uX)(),(0,r.CE)("div",C,[(0,r.Lk)("img",{src:`https://openweathermap.org/img/wn/${a.forecast.weather[0].icon}@2x.png`,alt:""},null,8,y),(0,r.Lk)("p",null,(0,i.v_)(a.forecast.main.temp)+"°C, "+(0,i.v_)(e.$t("feelsLike"))+" "+(0,i.v_)(a.forecast.main.feels_like)+"°C",1),(0,r.Lk)("p",null,(0,i.v_)(e.$t("pressure"))+": "+(0,i.v_)(a.forecast.main.pressure)+" мм рт. ст.",1),(0,r.Lk)("p",null,(0,i.v_)(e.$t("humidity"))+": "+(0,i.v_)(a.forecast.main.humidity)+"%",1),(0,r.Lk)("p",null,(0,i.v_)(e.$t("wind"))+": "+(0,i.v_)(a.forecast.wind.speed)+" "+(0,i.v_)(e.$t("windSpeed"))+", "+(0,i.v_)(e.$t("windDirection"))+": "+(0,i.v_)(a.forecast.wind.deg)+"°",1),(0,r.Lk)("p",null,(0,i.v_)(a.forecast.dt_txt.slice(8,10))+"."+(0,i.v_)(a.forecast.dt_txt.slice(5,7))+" "+(0,i.v_)(a.forecast.dt_txt.slice(-8,-3)),1)])}var _={name:"CardForecast",props:{forecast:Object},data(){return{sliceStart:0,sliceEnd:8}},methods:{prevPage(){this.sliceStart-=8,this.sliceEnd-=8},nextPage(){this.sliceStart+=8,this.sliceEnd+=8}}},L=a(1241);const V=(0,L.A)(_,[["render",b]]);var F=V,$={name:"WeatherForeCast",props:{forecast:Array},data(){return{sliceStart:0,sliceEnd:8}},methods:{prevPage(){this.sliceStart-=8,this.sliceEnd-=8},nextPage(){this.sliceStart+=8,this.sliceEnd+=8}},components:{CardForecast:F}};const S=(0,L.A)($,[["render",w]]);var E=S,x={name:"App",components:{WeatherForeCast:E},mounted(){fetch("https://api.openweathermap.org/data/2.5/weather?lat=57.9108371&lon=59.9715384&appid=0b48dc9464e4dd154dc21fd44f9f39b1&units=metric&lang=ru").then((e=>e.json())).then((e=>{this.weather=e;let t=new Date(1e3*this.weather.dt);this.time=t.getHours()+":"+("0"+t.getMinutes()).substr(-2)})),fetch("https://api.openweathermap.org/data/2.5/forecast?lat=57.9108371&lon=59.9715384&appid=0b48dc9464e4dd154dc21fd44f9f39b1&units=metric&lang=ru").then((e=>e.json())).then((e=>{this.weatherForeCast=e.list})),fetch("http://127.0.0.1:8081/24/10/2024").then((e=>e.json())).then((e=>{this.valute=e})),this.favourites=this.itemsFromLocalStorage},computed:{itemsFromLocalStorage(){return JSON.parse(localStorage.getItem("favCity")||"{}")}},watch:{favourites(e){localStorage.setItem("favCity",JSON.stringify(e))}},data(){return{weather:null,weatherForeCast:[],valute:null,currValute:"RUS",foreignValuteVal:null,russianValuteVal:null,time:null,grades:"metric",coordinates:{"N-Tagil":[57.9108371,59.9715384],Tokyo:[35.6895,139.692],Pekin:[39.916668,116.383331],London:[51.509865,-.118092],Washington:[38.889805,-77.009056]},curCity:"N-Tagil",favourites:{}}},methods:{addFav(){var e=this.curCity;this.favourites[e]=this.coordinates[e],localStorage.favCity=JSON.stringify(this.favourites)},removeFav(e){delete this.favourites[e]},changeGrades(e){this.grades=e.target.value,this.getCity(this.curCity)},changeCoords(e){this.curCity=e.target.value,this.getCity(this.curCity)},getCity(e){switch(this.russianValuteVal=null,this.foreignValuteVal=null,e){case"N-Tagil":this.changeCity(this.coordinates[e][0],this.coordinates[e][1]),this.currValute="RUS";break;case"Tokyo":this.changeCity(this.coordinates[e][0],this.coordinates[e][1]),this.currValute="JPY";break;case"Pekin":this.changeCity(this.coordinates[e][0],this.coordinates[e][1]),this.currValute="CNY";break;case"London":this.changeCity(this.coordinates[e][0],this.coordinates[e][1]),this.currValute="GBP";break;case"Washington":this.changeCity(this.coordinates[e][0],this.coordinates[e][1]),this.currValute="USD";break}},changeCity(e,t){fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${e}&lon=${t}&appid=0b48dc9464e4dd154dc21fd44f9f39b1&units=${this.grades}&lang=ru`).then((e=>e.json())).then((e=>{this.weather=e;let t=new Date(1e3*this.weather.dt);this.time=t.getHours()+":"+("0"+t.getMinutes()).substr(-2)})),fetch(`https://api.openweathermap.org/data/2.5/forecast?lat=${e}&lon=${t}&appid=0b48dc9464e4dd154dc21fd44f9f39b1&units=${this.grades}&lang=ru`).then((e=>e.json())).then((e=>{this.weatherForeCast=e.list}))},convertRubs(){let e=parseFloat(this.valute[this.currValute].Value),t=parseFloat(this.valute[this.currValute].Nominal);this.foreignValuteVal=(this.russianValuteVal/(e/t)).toFixed(2)},convertForeign(){let e=parseFloat(this.valute[this.currValute].Value),t=parseFloat(this.valute[this.currValute].Nominal);this.russianValuteVal=(this.foreignValuteVal*(e/t)).toFixed(2)}}};const U=(0,L.A)(x,[["render",m]]);var P=U,O=a(5931);const j=(0,O.hU)({locale:"ru",fallbackLocale:"ru",messages:{ru:{weatherIn:"Погода в",loading:"Загрузка",time:"Время",now:"Сейчас",feelsLike:"ощущается как",pressure:"Давление:",pressureUM:"мм рт. ст.",humidity:"Влажность",wind:"Ветер",windSpeed:"м/с",windDirection:"направление",tempUM:{celsius:"Цельсии",fahrenheit:"Фаренгейты"}},en:{weatherIn:"Weather in",loading:"Loading",time:"Time",now:"Now",feelsLike:"feels like",pressure:"Pressure:",pressureUM:"mmHg",humidity:"Humidity",wind:"Wind",windSpeed:"m/s",windDirection:"direction",tempUM:{celsius:"Celsius",fahrenheit:"Fahrenheit"}}}}),N=(0,n.Ef)(P);N.use(j),N.mount("#app")}},t={};function a(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,a),i.exports}a.m=e,function(){var e=[];a.O=function(t,n,r,i){if(!n){var o=1/0;for(c=0;c<e.length;c++){n=e[c][0],r=e[c][1],i=e[c][2];for(var s=!0,l=0;l<n.length;l++)(!1&i||o>=i)&&Object.keys(a.O).every((function(e){return a.O[e](n[l])}))?n.splice(l--,1):(s=!1,i<o&&(o=i));if(s){e.splice(c--,1);var u=r();void 0!==u&&(t=u)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[n,r,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,i,o=n[0],s=n[1],l=n[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(r in s)a.o(s,r)&&(a.m[r]=s[r]);if(l)var c=l(a)}for(t&&t(n);u<o.length;u++)i=o[u],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(c)},n=self["webpackChunkweather"]=self["webpackChunkweather"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[504],(function(){return a(9697)}));n=a.O(n)})();
//# sourceMappingURL=app.9489b709.js.map